!function(t){"use strict";var e=t(window),i=(t(document),t("html")),a=t("body"),n=(window.T4Sstrings,window.T4Sconfigs),s=(T4Srequest.page_type,T4Sroutes.search_url,function(){window.History;var s,r,o,l="collection"==T4Srequest.page_type||"search"==T4Srequest.page_type,c="content--loading",d="is--loading",h="is--listview",p="is--active",f={root:null,rootMargin:"0px",threshold:0};function u(e){this.container=e,this.$container=t(e),this.options=JSON.parse(this.$container.attr("data-ntajax-options")),this.main=this.options.id||"",this.typeAjax=this.options.type||"LmDefault",this.updateURLPrev=this.options.updateURLPrev||!1,this.isProduct=this.options.isProduct||!1,this.$section=t(`#shopify-section-${this.main}`),this.filter="facets",this.filterData=[],this.queryParams={},this.disableScroll=this.options.disableScroll||!1,this.scrollOffset=this.options.scrollOffset||100,this.isReloadFilter=!0,this.nouisliderLoaded=!1,self.isbtnLoadMore=!0,this.setupEventListeners(),this.onFirstLoadFacets()}return u.prototype=Object.assign({},u.prototype,{destroyEventListeners:function(){self.$container.off("click.ntajax"),self.$filter.off("click.ntajax"),e.off("popstate.ntajax")},setupEventListenersFacets:function(){var e=this;e.$filter=t("#shopify-section-"+this.filter),e.removeDataDelay(),e.$filter.on("click.ntajax","[data-filter-links] a",function(i){i.preventDefault(),e.isReloadFilter=!0;const a=t(this);e.ntAjaxStart(),e.$filter.find("[data-drawer-close]").trigger("click.drawer"),e.loadPageContent(a.attr("href")),e.updateURLHash(a,!0)});var i=e.$filter.find(".t4s-price_slider_wrapper");0!=i.length&&$script(n.script8,function(){e.nouisliderLoaded=!0,e.initPriceRange(i)})},setupEventListeners:function(){var i=this;i.$container.on("click.ntajax",".t4s-active-filters a",function(e){e.preventDefault(),i.isReloadFilter=!0,i.ntAjaxStart(),i.loadPageContent(t(this).attr("href")),i.updateURLHash(t(this),!0)}),i.$section.on("click","[data-filter-sortby] a, [data-sortby-item]",function(e){e.preventDefault(),i.isReloadFilter=!1;const a=t(this),n=i.getUrlSortby(a);i.ntAjaxStart(),i.loadPageContent(n),i.updateURLHash(t(this),!1,n)}),i.$container.on("click","[data-ntjax-wrap] a, [data-ntjax-link]",function(e){e.preventDefault(),i.isReloadFilter=!1;const a=t(this);i.ntAjaxStart(),i.loadPageContent(a.attr("href")),i.updateURLHash(a,!0)}),i.$section.on("click","[data-load-more]",function(e){e.preventDefault(),i.isReloadFilter=!1;const a=t(this);a.addClass(d),r=`${a.attr("href")}&section_id=${i.main}`,i.isbtnLoadMore=!t(this).is("[data-is-prev]"),i.renderSectionFromFetch(r,i.main,function(t,e){i[i.typeAjax](t),a.removeClass(d)}),(i.isbtnLoadMore||i.updateURLPrev)&&i.updateURLHash(a,!0)}),i.clickOnScrollButton(),e.on("popstate.ntajax",function(t){try{const e=t.originalEvent.state;if(!e.path)return;t.preventDefault(),t.stopImmediatePropagation(),i.isReloadFilter=e.updateFilter,i.ntAjaxStart(),i.loadPageContent(e.path)}catch(t){}}),i.layoutSwitching()},loadPageContent:function(t){var e=this;e.renderSection(t,e.main,function(i,n,s,r){if(r){var o=(new DOMParser).parseFromString(i,"text/html").querySelector("[data-ntajax-container]").innerHTML;e.filterData=[...e.filterData,{DomHTMl:o,filterUrl:s}]}else o=i;e.$container.html(o),e.updateListing(),e.isProduct&&T4SThemeSP.reinitProductGridItem(),a.trigger("t4s:hideTooltip"),a.trigger("currency:update"),"AjaxIsotope"!=e.typeAjax&&"LmIsotope"!=e.typeAjax||T4SThemeSP.Isotopet4s.init(e.$container.find(".isotopet4s")),e.clickOnScrollButton(),e.$filter&&e.$filter.length>0&&!e.isReloadFilter&&e.removeDataDelay(),e.$filter&&e.isReloadFilter&&e.renderSection(t,e.filter,function(t,i,a,n){if(n){var s=(new DOMParser).parseFromString(t,"text/html").querySelector("[data-filter-links]").innerHTML;e.filterData=[...e.filterData,{DomHTMl:s,filterUrl:a}]}else s=t;e.$filter.find("[data-filter-links]").html(s),e.nouisliderLoaded&&e.initPriceRange(e.$filter.find(".t4s-price_slider_wrapper")),e.removeDataDelay()})})},renderSection:function(t,e,i){s=t.indexOf("?")>-1?"&":"/?",r=t+s+"section_id="+e,o=(t=>t.filterUrl===r),this.filterData.some(o)?this.renderSectionFromCache(r,o,e,i):this.renderSectionFromFetch(r,e,i)},renderSectionFromFetch:function(t,e,i){fetch(t,{method:"GET",headers:{"Cache-Control":"no-cache"}}).then(t=>t.text()).then(a=>{i(a,e,t,!0,!0),this.ntAjaxEnd()}).catch(t=>{this.ntAjaxEnd()})},renderSectionFromCache:function(t,e,i,a){a(this.filterData.find(e).DomHTMl,i,t,!1,!0),this.ntAjaxEnd()},debounce:function(t,e){let i;return(...a)=>{clearTimeout(i),i=setTimeout(()=>t.apply(this,a),e)}},updateURLHash:function(t,e=!0,i){i=i||t.attr("href");var a=t.text();history.pushState({path:i,updateFilter:e},a,i)},initPriceRange:function(e){var n=this,s=e.find(".t4s-price_slider_amount"),r=s.data("minstr"),o=s.data("maxstr"),l=s.find(".t4s-min_price"),c=s.find(".t4s-max_price"),d=(s.find(".t4s-url_price").val(),l.data("min")),h=c.data("max"),p=s.data("step")||1,f=l.val(),u=c.val(),m="ltr";s.find("input.t4s-url_price, input.t4s-min_price, input.t4s-max_price").hide(),e.find(".t4s-price_slider, .t4s-price_label ,.t4s-price_slider_btn").show();var g=e.find(".t4s-price_steps_slider:not(.noUi-target)"),v=g[0],y=["span.t4s-from","span.t4s-to"],S=[".t4s-min_price",".t4s-max_price"];g.length<1||(i.hasClass("rtl_true")&&(m="rtl"),noUiSlider.create(v,{start:[f,u],connect:!0,step:p,direction:m,range:{min:d,max:h}}),v.noUiSlider.on("update",function(t,i){var n=parseInt(t[i]);e.find(y[i]).html(T4SThemeSP.Currency.formatMoney(n)),s.find(S[i]).val(T4SThemeSP.Currency.formatMoney(n,"{{amount}}").replaceAll(",","")),a.trigger("currency:update")}),e.on("click",".t4s-price_slider_btn",function(e){f=l.val(),u=c.val();var i=n.getUrlPriceFilter(r,o,f,u);n.ntAjaxStart(),n.loadPageContent(i),n.updateURLHash(t(this),!0,i),n.$filter.find("[data-drawer-close]").trigger("click.drawer")}))},_defineProperty:function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},layoutSwitching:function(i,a,n){var s=this,r=s.$section.find("[data-layout-switch]"),o=r.find(".is--mobile .is--active").data("col"),l=r.find(".is--tablet .is--active").data("col"),c=r.find(".is--desktop .is--active").data("col"),d=T4Sroutes.cart_update_url;0!=r.length&&(s.$section.on("click","[data-layout-switch] button",function(e){e.preventDefault();var i=t(this),a=i.data("breakpoint"),n=i.data("col"),r=s.$container.find(".t4s-products");i.parent().find("."+p).removeClass(p),i.addClass(p),"list_t4s"==n?r.addClass(h+" on--list-"+a):r.removeClass(h+" on--list-"+a),"mobile"==a?(r.removeClass("t4s-row-cols-"+o).addClass("t4s-row-cols-"+n),o=n):"tablet"==a?(r.removeClass("t4s-row-cols-md-"+l).addClass("t4s-row-cols-md-"+n),l=n):(r.removeClass("t4s-row-cols-lg-"+c).addClass("t4s-row-cols-lg-"+n),c=n),r.hasClass("isotopet4s")&&r.isotopet4s("layout"),lazySizesT4.autoSizer.checkElems(),isStorageSpdLocal&&localStorage.setItem("collection_items_per_row_"+a,c),fetch(d+".js",{body:JSON.stringify({attributes:s._defineProperty({},"collection_items_per_row",o+"."+l+"."+c)}),credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})}),e.on("resize",function(){var t=r.find(".is--active:visible").data("breakpoint"),e=r.find(".t4s-products");e.hasClass("on--list-"+t)?e.addClass(h):e.removeClass(h)}))},updateListing:function(){if(0!=this.$section.find(".t4s_icon_viewlist").length){var t=window.innerWidth,e=this.$section.find("[data-layout-switch]").attr("data-items").split("."),i=this.$container.find(".t4s-products"),a="is--listview on--list-",n=a;t<768&&"list_t4s"==e[0]?a+="mobile":t<1025&&"list_t4s"==e[1]?a+="tablet":"list_t4s"==e[2]&&(a+="desktop"),a!=n&&i.addClass(a)}},initParams:function(){if(location.search.length){var t,e=location.search.substr(1).split("&");this.queryParams={};for(var i=0;i<e.length;i++)(t=e[i].split("=")).length&&(this.queryParams[decodeURIComponent(t[0])]=decodeURIComponent(t[1]))}else this.queryParams={}},getUrlSortby:function(t){var e=t.data("value"),i=window.location.pathname;return this.initParams(),this.queryParams.page&&delete this.queryParams.page,this.queryParams.sort_by=e,"/"==i.substr(i.length-1)&&(i=i.slice(0,-1)),`${i}/?${unescape(new URLSearchParams(this.queryParams).toString())}`},getUrlPriceFilter:function(t,e,i,a){var n=window.location.pathname;return this.initParams(),this.queryParams.page&&delete this.queryParams.page,this.queryParams[t]=i,this.queryParams[e]=a,"/"==n.substr(n.length-1)&&(n=n.slice(0,-1)),`${n}/?${unescape(new URLSearchParams(this.queryParams).toString())}`},onFirstLoadFacets:function(){if(IsDesignMode||!l)return;var t=this,e="",i=window.location.pathname;t.initParams(),t.queryParams.page&&delete t.queryParams.page;const n=new URLSearchParams(t.queryParams).toString();n.length>0&&(e="&"),"/"==i.substr(i.length-1)&&(i=i.slice(0,-1)),fetch(`${i}/?${n}${e}section_id=${t.filter}`,{method:"GET",headers:{"Cache-Control":"no-cache"}}).then(t=>t.text()).then(e=>{a.append(e),t.setupEventListenersFacets()}).catch(t=>{})},ntAjaxStart:function(){this.scrollToTop(),a.addClass(c),this.$container.addClass(d)},ntAjaxEnd:function(){a.removeClass(c),this.$container.removeClass(d)},removeDataDelay:function(){t('[data-drawer-options*="#t4s-filter-hidden"]').removeAttr("data-drawer-delay")},scrollToTop:function(){this.disableScroll||t("html, body").stop().animate({scrollTop:this.$container.offset().top-this.scrollOffset},400)},handleIntersect:function(e,i){e.forEach(function(e){let a=e.target;e.isIntersecting&&!a.classList.contains(d)?t(a).trigger("click"):null===a.offsetParent&&i.unobserve(a)})},clickOnScrollButton:function(){var e=this,i=e.$container.find("[data-load-onscroll]:not(.t4s-lm-onscroll-init)");0!=i.length&&window.IntersectionObserver&&i.each(function(i){let a;(a=new IntersectionObserver(e.handleIntersect,f)).observe(this),t(this).addClass("t4s-lm-onscroll-init")})},LmDefault:function(e){var i=t(e),a=i.find("[data-contentlm-replace]").html(),n=this.isbtnLoadMore?i.find("[data-wrap-lm]"):i.find("[data-wrap-lm-prev]"),s=this.$section.find("[data-contentlm-replace]");this.isbtnLoadMore?s.append(a):s.prepend(a),this.initLoamoreUpdate(n)},LmIsotope:function(e){var i=t(e),a=i.find("[data-contentlm-replace]").html(),n=this.isbtnLoadMore?i.find("[data-wrap-lm]"):i.find("[data-wrap-lm-prev]"),s=this.$section.find("[data-contentlm-replace]");a=t(a),this.isbtnLoadMore?s.append(a).isotopet4s("appended",a):s.prepend(a).isotopet4s("prepended",a),this.initLoamoreUpdate(n)},initLoamoreUpdate:function(t){t.length>0&&this.isbtnLoadMore?this.$section.find("[data-wrap-lm]").html(t.html()):this.isbtnLoadMore?this.$section.find("[data-wrap-lm]").hide():t.length>0&&!this.isbtnLoadMore?this.$section.find("[data-wrap-lm-prev]").html(t.html()):this.isbtnLoadMore||this.$section.find("[data-wrap-lm-prev]").hide(),this.isProduct&&T4SThemeSP.reinitProductGridItem(),a.trigger("t4s:hideTooltip"),a.trigger("currency:update"),this.isbtnLoadMore&&this.clickOnScrollButton()}}),u}());T4SThemeSP.initFacets=void t(".t4s-section-main [data-ntajax-options]:not(is--enabled)").each(function(){t(this).addClass("is--enabled"),this.Facets=new s(this)})}(jQuery_T4NT);